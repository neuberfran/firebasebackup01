{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/auth.guard.ts","webpack:///./src/app/devices.component.ts","webpack:///./src/app/error.component.ts","webpack:///./src/app/link.component.ts","webpack:///./src/app/link.guard.ts","webpack:///./src/app/login.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoginComponent } from \"./login.component\";\nimport { DevicesComponent } from './devices.component';\nimport { AuthGuard } from \"./auth.guard\";\nimport { LinkAccountComponent } from \"./link.component\";\nimport { LinkGuard } from './link.guard';\nimport { ErrorComponent } from './error.component';\n\nconst routes: Routes = [\n  {path:'', redirectTo: 'devices', pathMatch: 'full' },\n  {path:'login', component:LoginComponent },\n  {path:'devices', component:DevicesComponent, canActivate:[AuthGuard] },\n  {path:'link-account', component:LinkAccountComponent, canActivate:[LinkGuard] },\n  {path:'error', component:ErrorComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { enableTracing: true })],\n  exports: [RouterModule]\n  \n})\nexport class AppRoutingModule { }\n","\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AngularFireAuth } from '@angular/fire/auth';\n\n@Component({\n  selector: 'app-root',\n  template: `\n    <mat-toolbar>\n      <span>{{ title }}</span>\n      <span class=\"spacer\"></span>\n      <button *ngIf=\"authService.authState | async as user\" (click)=\"logout()\" mat-icon-button>\n        <mat-icon aria-label=\"Log out\">exit_to_app</mat-icon>\n      </button>\n    </mat-toolbar>\n    <div>\n      <router-outlet></router-outlet>\n    </div>\n  `,\n  styles: []\n})\nexport class AppComponent {\n  title = 'Device Manager';\n\n  constructor(public authService: AngularFireAuth,\n    private router: Router) { }\n\n  logout() {\n    this.authService.auth.signOut().then(() => {\n      this.router.navigate(['login']);\n    });\n  }\n}\n","\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { environment } from \"../environments/environment\";\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { LoginComponent } from './login.component';\nimport { DevicesComponent } from './devices.component';\nimport { AuthGuard } from './auth.guard';\nimport { LinkAccountComponent } from \"./link.component\";\nimport { LinkGuard } from \"./link.guard\";\nimport { ErrorComponent } from './error.component';\n\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatButtonModule, MatToolbarModule, MatListModule, MatIconModule, MatSnackBarModule } from '@angular/material';\nimport { AngularFireModule } from \"@angular/fire\";\nimport { AngularFireAuthModule } from \"@angular/fire/auth\";\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    LoginComponent,\n    DevicesComponent,\n    LinkAccountComponent,\n    ErrorComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    BrowserAnimationsModule,\n    MatButtonModule,\n    MatToolbarModule,\n    MatListModule,\n    MatIconModule,\n    MatSnackBarModule,\n    AngularFireModule.initializeApp(environment.firebase),\n    AngularFireAuthModule,\n    AngularFirestoreModule\n  ],\n  providers: [\n    AuthGuard,\n    LinkGuard\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","\nimport { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AngularFireAuth } from '@angular/fire/auth';\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(private authService: AngularFireAuth, private router: Router) { }\n\n  canActivate(): Observable<boolean> {\n      return this.authService.authState.pipe(map(user => {\n        if (user == null) {\n          this.router.navigate(['login']);\n          return false;\n        }\n\n        return true;\n      }));\n  }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { Observable } from 'rxjs';\nimport { filter, switchMap, map } from 'rxjs/operators';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { MatSnackBar } from \"@angular/material\";\n\nexport interface Device {id: string; name: string; owner: string; type: string; online: boolean; icon: string; status: string; state: any}\nenum DeviceType {\n  Light = 'light',\n  Thermostat = 'thermostat'\n}\n\n@Component({\n  selector: 'app-devices',\n  template: `\n    <mat-list role=\"list\">\n      <mat-list-item role=\"listitem\" *ngFor=\"let device of devices | async\">\n        <mat-icon matListIcon aria-label=\"Device type\">{{ device.icon }}</mat-icon>\n        <h3 matLine> {{ device.name }} </h3>\n        <p matLine> {{ device.status }} </p>\n        <button mat-icon-button (click)=\"deleteDevice(device)\">\n            <mat-icon>delete</mat-icon>\n        </button>\n      </mat-list-item>\n    </mat-list>\n  `,\n  styles: []\n})\nexport class DevicesComponent implements OnInit {\n  devices: Observable<Device[]>;\n  constructor(private authService: AngularFireAuth, private afStore: AngularFirestore, private snackBar: MatSnackBar) { }\n\n  ngOnInit() {\n    this.devices = this.authService.authState.pipe(\n      filter(user => user != null),\n      switchMap(user => {\n        // List the collection of devices for this user once signed in\n        return this.afStore\n          .collection('devices', ref => ref.where('owner', '==', user.uid))\n          .snapshotChanges().pipe(\n            map(actions => actions.map(a => {\n              const data = a.payload.doc.data() as Device;\n              data.icon = this.deviceIcon(data);\n              data.status = this.deviceState(data);\n\n              const id = a.payload.doc.id;\n              return { id, ...data };\n            }))\n          );\n      })\n    )\n  }\n\n  /**\n   * Determine the icon to display based on the device type\n   */\n  deviceIcon(device: Device) {\n    switch (device.type) {\n      case DeviceType.Light: return 'lightbulb_outline';\n      case DeviceType.Thermostat: return 'ac_unit';\n      default: return 'developer_board';\n    }\n  }\n\n  /**\n   * Determine the state to display\n   */\n  deviceState(device: Device) {\n    if (!device.online || !device.state) {\n      return 'Offline';\n    }\n\n    switch (device.type) {\n      case DeviceType.Light:\n        return device.state.on ? `Brightness: ${device.state.brightness}` : 'OFF';\n      case DeviceType.Thermostat:\n        return (device.state.mode !== 'off') ? `Mode: ${device.state.mode}, Setpoint: ${device.state.setpoint}` : 'OFF';\n      default:\n        return 'Unknown Device';\n    }\n  }\n\n  /**\n   * Remove this device from the user's account\n   */\n  deleteDevice(device: Device) {\n    const batch = this.afStore.firestore.batch();\n    // Delete the device configuration, followed by the device\n    batch.delete(this.afStore.firestore.doc(`device-configs/${device.id}`));\n    batch.delete(this.afStore.firestore.doc(`devices/${device.id}`));\n    batch.commit().then(() => {\n      this.snackBar.open(`Deleted ${device.name}`, '', {\n        duration: 2000,\n      });\n    });\n  }\n}\n","\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-error',\n  template: `\n    <div style=\"text-align:center;\">\n      <h1>Account Linking Error</h1>\n      <p>We were unable to link your account with the Google Assistant.</p>\n    </div>\n  `,\n  styles: []\n})\nexport class ErrorComponent {}\n\n","\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport * as firebase from \"firebase/app\";\n\n@Component({\n  selector: 'app-link',\n  template: `\n    <div style=\"text-align:center; padding:16px\">\n      <div *ngIf=\"authService.user | async as user; else showLogin\">\n        <h3>Logged in as {{ user.displayName }}</h3>\n        <p>\n          Click 'Link this Account' to authorize the Google Assistant\n          to control your Smart Home devices.\n        </p>\n        <button (click)=\"linkAccount()\" mat-raised-button style=\"margin-right: 8px;\">\n          Link this Account\n        </button>\n        <button (click)=\"logout()\" mat-raised-button>\n          Sign out\n        </button>\n      </div>\n    </div>\n\n    <ng-template #showLogin>\n      <h1>Link Smart Home Account</h1>\n      <p>Sign in with your Google account to link your devices to the Google Assistant.</p>\n      <button (click)=\"login()\" mat-raised-button>\n        Sign in with Google\n      </button>\n    </ng-template>\n  `,\n  styles: []\n})\nexport class LinkAccountComponent implements OnInit {\n  redirectUri: string;\n  state: string;\n  idToken: string;\n  constructor(public authService: AngularFireAuth,\n    public route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.authService.idToken.subscribe((token) => {\n      this.idToken = token;\n    });\n\n    this.route.queryParamMap.subscribe((params) => {\n      this.redirectUri = params.get('redirect_uri');\n      this.state = params.get('state');\n    });\n  }\n\n  login() {\n    this.authService.auth.setPersistence(firebase.auth.Auth.Persistence.NONE).then(() => {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      this.authService.auth.signInWithRedirect(provider);\n    });\n  }\n\n  logout() {\n    this.authService.auth.signOut();\n  }\n\n  linkAccount() {\n    const next = new URL(this.redirectUri);\n    next.searchParams.append('code', this.idToken);\n    next.searchParams.append('state', this.state);\n    window.location.href = next.toString();\n  }\n}\n","\nimport { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\nimport { environment } from \"../environments/environment\";\n\n@Injectable()\nexport class LinkGuard implements CanActivate {\n  constructor(private router: Router) { }\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): boolean {\n    const params = next.queryParamMap;\n\n    const allowedHosts = [\n      'https://oauth-redirect.googleusercontent.com',\n      'https://developers.google.com'\n    ];\n\n    // Validate account linking request parameters\n    if (!params.has('client_id')\n        || !params.has('response_type')\n        || !params.has('redirect_uri')\n        // Client id matches expected value\n        || params.get('client_id') !== environment.clientId\n        // Client is requesting an authorization code\n        || params.get('response_type') !== 'code'\n        // Client requests a redirect to a known host\n        || !allowedHosts.some((element, _index, _array) => params.get('redirect_uri').startsWith(element))) {\n          console.error('Invalid Link Request', state.url)\n          this.router.navigate(['error']);\n          return false;\n        }\n\n    return true;\n  }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport * as firebase from \"firebase/app\";\n\n@Component({\n  selector: 'app-login',\n  template: `\n    <div style=\"text-align:center;\">\n      <h1>Smart Home Device Manager</h1>\n      <p>Sign in with your Google account to view and manage your IoT devices.</p>\n      <button (click)=\"login()\" mat-raised-button>\n        Sign in with Google\n      </button>\n    </div>\n  `,\n  styles: []\n})\nexport class LoginComponent implements OnInit {\n\n  constructor(private authService: AngularFireAuth,\n    private router: Router) { }\n\n  ngOnInit() {\n    // Redirect only on successful login\n    this.authService.authState.subscribe((user) => {\n      if (user) {\n        this.router.navigate(['devices']);\n      }\n    });\n  }\n\n  login() {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    this.authService.auth.signInWithRedirect(provider);\n  }\n}\n","\nexport const environment = {\n  production: true,\n \n  firebase: {\n    apiKey: \"AIzaSyChfxrbgd5OEJlgy7aw8D7pvlaHsPM1hlI\",\n    authDomain: \"casaminha-2e0ca.firebaseapp.com\",\n    databaseURL: \"https://casaminha-2e0ca.firebaseio.com\",\n    projectId: \"casaminha-2e0ca\",\n    storageBucket: \"casaminha-2e0ca.appspot.com\",\n    messagingSenderId: \"567617726062\"\n  },\n  clientId: \"567617726062-9r9upj4tip1nfdupm3iin2ld6t7coa0t.apps.googleusercontent.com\"\n};\n","\nimport 'hammerjs';\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}